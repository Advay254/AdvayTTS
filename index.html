<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ADVAY TTS — Text To Speech (Male/Female, Age, Tone & Accents)</title>
  <meta name="description" content="Create speech from text with selectable gender, age (5-60), tones (normal, angry, happy, sad, surprised, fear, playful) with intensity, multiple accents and custom voice presets. Created by ADVAY." />
  <meta name="robots" content="index,follow" />
  <!-- Open Graph -->
  <meta property="og:title" content="ADVAY TTS — Text to Speech" />
  <meta property="og:description" content="Create speech from text with selectable gender, age, tone intensity and accents. Created by ADVAY." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://your-deployment-url.example/" />
  <meta property="og:site_name" content="ADVAY TTS" />
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#4f46e5; --muted:#9aa4b2; --glass: rgba(255,255,255,0.03);
      color-scheme: dark;
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{margin:0;background:linear-gradient(180deg,#071022 0%, #081428 100%);color:#e6eef6;padding:24px;}
    .container{max-width:1100px;margin:0 auto;}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px;}
    h1{font-size:20px;margin:0}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 6px 24px rgba(2,6,23,0.7);margin-bottom:18px;border:1px solid rgba(255,255,255,0.03)}
    .controls{display:grid;grid-template-columns:1fr 320px;gap:14px;}
    .form-row{margin-bottom:10px;}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    select,input[type=range],textarea,input[type=number]{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    textarea{min-height:140px;resize:vertical;padding:10px;}
    button{background:var(--accent);border:none;padding:10px 14px;border-radius:10px;color:white;font-weight:600;cursor:pointer}
    .small{font-size:13px;color:var(--muted)}
    .row{display:flex;gap:8px}
    .accent-list{display:flex;flex-wrap:wrap;gap:8px}
    .accent-pill{padding:6px 10px;border-radius:999px;background:var(--glass);font-size:13px;border:1px solid rgba(255,255,255,0.03)}
    footer{margin-top:20px;text-align:center;color:var(--muted);font-size:13px}
    .voices{display:flex;gap:8px;flex-wrap:wrap}
    .voice-pill{padding:6px 10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);cursor:pointer}
    .voice-pill.active{background:rgba(79,70,229,0.14);border-color:rgba(79,70,229,0.25)}
    .preview-audio{margin-top:10px;}
    .api-help{font-family:monospace;background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;font-size:13px;color:var(--muted);overflow:auto}
    .top-actions{display:flex;gap:8px;align-items:center}
    @media (max-width:900px){.controls{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ADVAY TTS</h1>
      <div class="top-actions small">Created by <strong>@ADVAY</strong></div>
    </header>

    <div class="card">
      <div class="controls">
        <div>
          <div class="form-row">
            <label for="text">Text to speak</label>
            <textarea id="text" placeholder="Type or paste text here...">Hello — this is a demo speech from ADVAY TTS. Change gender, age, tone and accent to test.</textarea>
          </div>

          <div class="form-row">
            <label>Gender & Age</label>
            <div class="row">
              <select id="gender">
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
              <input id="age" type="range" min="5" max="60" value="25" />
              <input id="ageNum" type="number" min="5" max="60" value="25" style="width:84px" />
            </div>
            <div class="small">Age affects pitch & voice choice. (5 to 60)</div>
          </div>

          <div class="form-row">
            <label>Tone & Intensity</label>
            <div class="row">
              <select id="tone">
                <option value="normal">Normal</option>
                <option value="happy">Happy</option>
                <option value="angry">Angry</option>
                <option value="sad">Sad</option>
                <option value="surprised">Surprised</option>
                <option value="fear">Fear</option>
                <option value="playful">Playful</option>
              </select>
              <input id="intensity" type="range" min="0" max="1.4" step="0.05" value="0.6" />
              <input id="intensityNum" type="number" min="0" max="1.4" step="0.05" value="0.6" style="width:84px" />
            </div>
            <div class="small">Intensity 0.0 to 1.4 — server maps this to prosody change.</div>
          </div>

          <div class="form-row">
            <label>Custom voice types (preset list)</label>
            <div class="voices" id="voicePresets">
              <!-- JS will populate based on gender -->
            </div>
          </div>

          <div class="form-row">
            <label>Accents (choose one)</label>
            <select id="accent">
              <!-- Top ~12 recognizable accents covering continents -->
              <option value="en-us">English (US)</option>
              <option value="en-gb">English (UK)</option>
              <option value="en-au">Australian English</option>
              <option value="en-in">Indian English</option>
              <option value="en-ng">Nigerian English</option>
              <option value="en-za">South African English</option>
              <option value="en-ca">Canadian English</option>
              <option value="en-ie">Irish English</option>
              <option value="en-ph">Filipino English</option>
              <option value="en-nz">New Zealand English</option>
              <option value="en-tt">Trinidadian English</option>
              <option value="en-ck">Neutral English</option>
            </select>
            <div class="small">These map to espeak-ng voice codes when calling the API. Server accepts any of these and tries to match to available voices.</div>
          </div>

          <div class="form-row">
            <label>Output format</label>
            <select id="format">
              <option value="mp3">MP3</option>
              <option value="wav">WAV</option>
            </select>
          </div>

          <div class="form-row row" style="margin-top:12px">
            <button id="previewBtn">Preview (Browser TTS)</button>
            <button id="serverBtn">Generate & Download (Server)</button>
            <button id="playLastBtn" style="display:none">Play last</button>
          </div>

          <div class="form-row preview-audio" id="playerWrap"></div>
        </div>

        <div>
          <div class="card" style="padding:12px;">
            <div style="font-weight:700;margin-bottom:8px">API / Integrations</div>
            <div class="small">You can call the server endpoint to synthesize speech from other websites or servers. Example request:</div>
            <pre class="api-help" id="curl">
POST /api/synthesize
Content-Type: application/json

{
  "text":"Hello world",
  "gender":"male",
  "age":25,
  "tone":"happy",
  "intensity":0.7,
  "voice":"default",
  "accent":"en-us",
  "format":"mp3"
}
            </pre>

            <div style="margin-top:10px" class="small">
              Example JavaScript:
              <pre class="api-help">fetch('/api/synthesize', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({...})})
.then(r=>r.blob()).then(b=>URL.createObjectURL(b)).then(url=>{/* use audio */})</pre>
            </div>
          </div>

          <div style="margin-top:12px" class="card small">
            <strong>Notes:</strong>
            <ul>
              <li>Server uses <code>espeak-ng</code> to synthesize (configurable). It's lightweight and requires no registration.</li>
              <li>Accent mapping uses common two/three-letter codes — server attempts best match to installed voices.</li>
              <li>To improve quality later, swap the engine implementation (instructions in README).</li>
            </ul>
          </div>

        </div>
      </div>
    </div>

    <footer>
      Created by ADVAY — <span class="small">© <span id="year"></span></span>
    </footer>
  </div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  // Preset voice lists (custom types) — you can expand these names to actual server-side voice mappings
  const VOICE_PRESETS = {
    male: [
      {id:'m_soft', label:'Soft Male'},
      {id:'m_bright', label:'Bright Male'},
      {id:'m_deep', label:'Deep Male'}
    ],
    female: [
      {id:'f_soft', label:'Soft Female'},
      {id:'f_clear', label:'Clear Female'},
      {id:'f_bubbly', label:'Bubbly Female'}
    ]
  };

  const genderEl = document.getElementById('gender');
  const ageEl = document.getElementById('age');
  const ageNumEl = document.getElementById('ageNum');
  const toneEl = document.getElementById('tone');
  const intensityEl = document.getElementById('intensity');
  const intensityNumEl = document.getElementById('intensityNum');
  const voiceWrap = document.getElementById('voicePresets');
  const textEl = document.getElementById('text');
  const previewBtn = document.getElementById('previewBtn');
  const serverBtn = document.getElementById('serverBtn');
  const playerWrap = document.getElementById('playerWrap');
  const formatEl = document.getElementById('format');

  function populateVoices(){
    const g = genderEl.value;
    voiceWrap.innerHTML = '';
    VOICE_PRESETS[g].forEach(p=>{
      const b = document.createElement('button');
      b.className = 'voice-pill';
      b.textContent = p.label;
      b.dataset.id = p.id;
      b.addEventListener('click', ()=> {
        document.querySelectorAll('.voice-pill').forEach(x=>x.classList.remove('active'));
        b.classList.add('active');
      });
      voiceWrap.appendChild(b);
    });
    // set first active
    const first = voiceWrap.querySelector('.voice-pill');
    if(first) first.classList.add('active');
  }
  populateVoices();
  genderEl.addEventListener('change', populateVoices);

  ageEl.addEventListener('input', ()=>{ ageNumEl.value = ageEl.value; });
  ageNumEl.addEventListener('input', ()=>{ let v=Math.max(5,Math.min(60,Number(ageNumEl.value)||5)); ageEl.value=v; ageNumEl.value=v; });

  intensityEl.addEventListener('input', ()=>{ intensityNumEl.value = intensityEl.value; });
  intensityNumEl.addEventListener('input', ()=>{ let v=Math.max(0,Math.min(1.4,Number(intensityNumEl.value)||0)); intensityEl.value=v; intensityNumEl.value=v; });

  function selectedVoice(){
    const v = document.querySelector('.voice-pill.active');
    return v ? v.dataset.id : 'default';
  }

  function browserSpeak(){
    const text = textEl.value.trim();
    if(!text) return alert('Please enter text.');
    if(!('speechSynthesis' in window)) return alert('Browser SpeechSynthesis not available.');
    const ut = new SpeechSynthesisUtterance(text);
    // map to simple properties
    ut.lang = document.getElementById('accent').value.replace('-', '-'); // best effort
    ut.rate = Math.max(0.6, 1 - ((document.getElementById('age').value - 20)/100)); // naive mapping of age to rate
    ut.pitch = document.getElementById('gender').value === 'male' ? 0.9 : 1.05;
    // tone adjustments:
    const tone = toneEl.value;
    const intensity = parseFloat(intensityEl.value);
    if(tone === 'angry'){ ut.rate *= 1 + intensity*0.3; ut.pitch *= 1 - intensity*0.15; }
    if(tone === 'happy'){ ut.pitch *= 1 + intensity*0.35; ut.rate *= 1 + intensity*0.15; }
    if(tone === 'sad'){ ut.rate *= 0.85 - intensity*0.25; ut.pitch *= 0.8 - intensity*0.12; }
    if(tone === 'surprised'){ ut.pitch *= 1 + intensity*0.6; ut.rate *= 1 + intensity*0.2; }
    if(tone === 'fear'){ ut.pitch *= 1 + intensity*0.2; ut.rate *= 1 + intensity*0.3; }
    if(tone === 'playful'){ ut.pitch *= 1 + intensity*0.25; ut.rate *= 1 + intensity*0.12; }
    speechSynthesis.cancel();
    speechSynthesis.speak(ut);
  }

  previewBtn.addEventListener('click', browserSpeak);

  serverBtn.addEventListener('click', async ()=>{
    const text = textEl.value.trim();
    if(!text) return alert('Please enter text.');
    const payload = {
      text,
      gender: genderEl.value,
      age: Number(ageEl.value),
      tone: toneEl.value,
      intensity: Number(intensityEl.value),
      voice: selectedVoice(),
      accent: document.getElementById('accent').value,
      format: formatEl.value
    };
    playerWrap.innerHTML = '<div class="small">Generating... (server)</div>';
    try{
      const res = await fetch('/api/synthesize', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify(payload)
      });
      if(!res.ok){
        const txt = await res.text();
        playerWrap.innerHTML = '<div class="small">Server error: '+res.status+' '+txt+'</div>';
        return;
      }
      const blob = await res.blob();
      const url = URL.createObjectURL(blob);
      playerWrap.innerHTML = '';
      const audio = document.createElement('audio');
      audio.controls = true;
      audio.src = url;
      playerWrap.appendChild(audio);

      // add download link
      const dl = document.createElement('a');
      dl.href = url;
      dl.download = 'advay_tts.' + (formatEl.value === 'wav' ? 'wav' : 'mp3');
      dl.textContent = 'Download audio';
      dl.style.display='inline-block'; dl.style.marginTop='8px';
      playerWrap.appendChild(dl);

    }catch(err){
      playerWrap.innerHTML = '<div class="small">Network error: '+err.message+'</div>';
    }
  });

  // Optional: expose a quick sample for crawlers
  // Nothing else to do
</script>
</body>
</html>
